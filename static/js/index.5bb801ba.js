!function(){var e,t,s,n,a={6930:function(e,t,s){"use strict";var n=s("5893");s("7294");var a=s("3719");t.Z=()=>(0,n.jsx)(a.Z,{})},5925:function(e,t,s){"use strict";s("9560"),s("9734");var n=s("5893");s("7294");var a=s("8307"),r=s("9525"),l=s("4464"),i=s("5097"),c=s("9539"),o=s("9461"),d=s("1408"),u=s("3025"),m=s("5019"),x=s("713"),g=s("9351"),h=s("4096");t.Z=()=>{let{state:e,decrement:t,reset:s,exportData:p,exportCSV:f,toggleDetailedMode:y}=(0,a.C)(),v=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768,b=[{key:"passingBy",label:"\u8DEF\u8FC7",icon:r.Z,color:"bg-blue-500 hover:bg-blue-600",shortcut:"1"},{key:"noticing",label:"\u6CE8\u610F\u5230\u5E97\u94FA",icon:l.Z,color:"bg-green-500 hover:bg-green-600",shortcut:"2"},{key:"consulting",label:"\u54A8\u8BE2",icon:i.Z,color:"bg-yellow-500 hover:bg-yellow-600",shortcut:"3"},{key:"buying",label:"\u8D2D\u4E70",icon:c.Z,color:"bg-red-500 hover:bg-red-600",shortcut:"4"}];return(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"\u5FEB\u901F\u8BA1\u6570"}),(0,n.jsxs)("button",{onClick:y,className:`flex items-center space-x-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ${e.detailedMode?"bg-indigo-100 text-indigo-700 hover:bg-indigo-200":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.detailedMode?(0,n.jsx)(o.Z,{className:"w-4 h-4"}):(0,n.jsx)(d.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{className:"hidden sm:inline",children:e.detailedMode?"\u5207\u6362\u5230\u7B80\u5316\u754C\u9762":"\u5207\u6362\u5230\u8BE6\u7EC6\u754C\u9762"}),(0,n.jsx)("span",{className:"sm:hidden",children:e.detailedMode?"\u7B80\u5316":"\u8BE6\u7EC6"})]})]}),(0,n.jsxs)("div",{className:"mb-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-800 mb-2",children:"\u5FEB\u901F\u8F93\u5165\u8BF4\u660E"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,n.jsxs)("div",{children:["\u2022 ",(0,n.jsx)("strong",{children:"\u6309\u4F4F\u6309\u94AE"}),"\uFF1A\u663E\u793A\u4EBA\u7FA4\u9009\u62E9\u754C\u9762"]}),(0,n.jsxs)("div",{children:["\u2022 ",(0,n.jsx)("strong",{children:"\u5355\u51FB\u6309\u94AE"}),"\uFF1A\u4F7F\u7528\u9ED8\u8BA4\u4EBA\u7FA4"]}),!v&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:["\u2022 ",(0,n.jsx)("strong",{children:"\u6570\u5B57\u952E 1-4"}),"\uFF1A\u5973\u6027\u9752\u5E74\u5FEB\u6377\u952E"]}),(0,n.jsxs)("div",{children:["\u2022 ",(0,n.jsx)("strong",{children:"\u5B57\u6BCD\u952E Q/W/E/R"}),"\uFF1A\u7537\u6027\u9752\u5E74\u5FEB\u6377\u952E"]})]})]})]}),(0,n.jsx)(h.Z,{}),(0,n.jsx)("div",{className:`${v?"space-y-2":"space-y-4"}`,children:b.map(s=>{let a=e.counters.total[s.key];return(0,n.jsx)(g.Z,{counterKey:s.key,label:s.label,icon:s.icon,color:s.color,shortcut:s.shortcut,count:a,onDecrement:()=>t(s.key)},s.key)})}),(0,n.jsxs)("div",{className:"mt-6 space-y-3",children:[(0,n.jsxs)("div",{className:`flex ${v?"flex-col space-y-2":"space-x-2"}`,children:[(0,n.jsxs)("button",{onClick:p,className:"flex-1 bg-indigo-500 hover:bg-indigo-600 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:[(0,n.jsx)(u.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"\u5BFC\u51FA JSON"})]}),(0,n.jsxs)("button",{onClick:f,className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:[(0,n.jsx)(m.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"\u5BFC\u51FA CSV"})]})]}),(0,n.jsxs)("button",{onClick:s,className:"w-full bg-gray-600 hover:bg-gray-700 text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200 flex items-center justify-center space-x-2",children:[(0,n.jsx)(x.Z,{className:"w-4 h-4"}),(0,n.jsx)("span",{children:"\u91CD\u7F6E\u6240\u6709\u8BA1\u6570\u5668"})]})]})]})}},1167:function(e,t,s){"use strict";s("3479"),s("3366"),s("5123"),s("9929"),s("6301"),s("9560"),s("9734");var n=s("5893");s("7294");var a=s("8307"),r=s("9858"),l=s("3777"),i=s("1629"),c=s("5077"),o=s("6125");t.Z=()=>{var e;let{state:t}=(0,a.C)(),{counters:s}=t,d=(null==s?void 0:s.total)||{passingBy:0,noticing:0,consulting:0,buying:0},u=(e,t)=>0===t?"0.0":(e/t*100).toFixed(1),m=t.sessionStartTime?Date.now()-t.sessionStartTime:0,x=[{label:"\u6CE8\u610F\u7387",value:`${u(d.noticing,d.passingBy)}%`,description:"\u6CE8\u610F\u5230\u7684\u4EBA\u6570 vs \u8DEF\u8FC7\u7684\u4EBA\u6570",color:"text-green-600"},{label:"\u54A8\u8BE2\u7387",value:`${u(d.consulting,d.noticing)}%`,description:"\u54A8\u8BE2\u7684\u4EBA\u6570 vs \u6CE8\u610F\u5230\u7684\u4EBA\u6570",color:"text-yellow-600"},{label:"\u8F6C\u5316\u7387",value:`${u(d.buying,d.consulting)}%`,description:"\u8D2D\u4E70\u7684\u4EBA\u6570 vs \u54A8\u8BE2\u7684\u4EBA\u6570",color:"text-red-600"},{label:"\u603B\u4F53\u8F6C\u5316\u7387",value:`${u(d.buying,d.passingBy)}%`,description:"\u8D2D\u4E70\u7684\u4EBA\u6570 vs \u8DEF\u8FC7\u7684\u4EBA\u6570",color:"text-blue-600"}],g=Object.values(d).reduce((e,t)=>e+t,0),h=(e=>{var t;let n=(null==s?void 0:null===(t=s.demographics)||void 0===t?void 0:t[e])||[];if(0===n.length)return null;let a={male:n.filter(e=>"male"===e.gender).length,female:n.filter(e=>"female"===e.gender).length};return{genderCounts:a,ageCounts:{young:n.filter(e=>"young"===e.ageGroup).length,young_adult:n.filter(e=>"young_adult"===e.ageGroup).length,mature:n.filter(e=>"mature"===e.ageGroup).length},total:n.length}})("passingBy"),p=h&&h.total>0;return(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-6",children:"\u7EDF\u8BA1\u4E0E\u6D1E\u5BDF"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsx)(r.Z,{className:"w-4 h-4 text-blue-600"}),(0,n.jsx)("span",{className:"text-sm font-medium text-blue-600",children:"\u603B\u4E92\u52A8\u6570"})]}),(0,n.jsx)("div",{className:"text-2xl font-bold text-blue-800",children:g})]}),(0,n.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,n.jsx)(l.Z,{className:"w-4 h-4 text-green-600"}),(0,n.jsx)("span",{className:"text-sm font-medium text-green-600",children:"\u4F1A\u8BDD\u65F6\u957F"})]}),(0,n.jsx)("div",{className:"text-lg font-bold text-green-800",children:t.sessionStartTime?(e=>{let t=Math.floor(e/36e5),s=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);return t>0?`${t}\u{5C0F}\u{65F6}${s}\u{5206}`:s>0?`${s}\u{5206}${n}\u{79D2}`:`${n}\u{79D2}`})(m):"\u672A\u5F00\u59CB"})]})]}),p&&(0,n.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,n.jsx)(i.Z,{className:"w-4 h-4 text-purple-600"}),(0,n.jsx)("span",{className:"text-sm font-medium text-purple-800",children:"\u4EBA\u53E3\u7EDF\u8BA1 (\u8DEF\u8FC7\u4EBA\u7FA4)"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"\u6027\u522B\u5206\u5E03"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\uD83D\uDC68 \u7537\u6027:"}),(0,n.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.genderCounts.male)||0})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\uD83D\uDC69 \u5973\u6027:"}),(0,n.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.genderCounts.female)||0})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-xs font-medium text-gray-600 mb-2",children:"\u5E74\u9F84\u5206\u5E03"}),(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\uD83E\uDDD2 \u9752\u5C11\u5E74\u53CA\u513F\u7AE5:"}),(0,n.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.ageCounts.young)||0})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\uD83D\uDC68\u200D\uD83D\uDCBC \u9752\u5E74:"}),(0,n.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.ageCounts.young_adult)||0})]}),(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\uD83D\uDC74 \u4E2D\u8001\u5E74:"}),(0,n.jsx)("span",{className:"font-medium",children:(null==h?void 0:h.ageCounts.mature)||0})]})]})]})]})]}),t.detailedMode&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,n.jsx)(c.Z,{className:"w-4 h-4 text-gray-600"}),(0,n.jsx)("span",{className:"text-sm font-medium text-gray-800",children:"\u65F6\u95F4\u4FE1\u606F"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u5F00\u59CB\u65F6\u95F4:"}),(0,n.jsx)("span",{className:"font-medium",children:t.sessionStartTime?new Date(t.sessionStartTime).toLocaleTimeString("zh-CN"):"\u672A\u5F00\u59CB"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u6700\u540E\u6D3B\u52A8:"}),(0,n.jsx)("span",{className:"font-medium",children:t.lastActivityTime?new Date(t.lastActivityTime).toLocaleTimeString("zh-CN"):"\u65E0\u6D3B\u52A8"})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u64CD\u4F5C\u6B21\u6570:"}),(0,n.jsx)("span",{className:"font-medium",children:(null===(e=t.history)||void 0===e?void 0:e.length)||0})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u6A21\u5F0F:"}),(0,n.jsx)("span",{className:"font-medium",children:t.detailedMode?"\u8BE6\u7EC6\u754C\u9762":"\u7B80\u5316\u754C\u9762"})]})]})]}),(0,n.jsx)("div",{className:"space-y-4 mb-6",children:x.map((e,t)=>(0,n.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(o.Z,{className:"w-4 h-4 text-gray-500"}),(0,n.jsx)("span",{className:"font-medium text-gray-800",children:e.label})]}),(0,n.jsx)("span",{className:`text-xl font-bold ${e.color}`,children:e.value})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]},t))})]}),(0,n.jsxs)("div",{className:"pt-6 border-t",children:[(0,n.jsx)("h3",{className:"font-medium text-gray-800 mb-3",children:"\u5F53\u524D\u8BA1\u6570\u6C47\u603B"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u8DEF\u8FC7:"}),(0,n.jsx)("span",{className:"font-medium",children:d.passingBy})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u6CE8\u610F\u5230:"}),(0,n.jsx)("span",{className:"font-medium",children:d.noticing})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u54A8\u8BE2:"}),(0,n.jsx)("span",{className:"font-medium",children:d.consulting})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{className:"text-gray-600",children:"\u8D2D\u4E70:"}),(0,n.jsx)("span",{className:"font-medium",children:d.buying})]})]})]})]})}},4096:function(e,t,s){"use strict";s("9560"),s("9734");var n=s("5893");s("7294");var a=s("8307");t.Z=()=>{let{state:e,setDefaultDemographicIndex:t}=(0,a.C)(),s=e=>{let t="male"===e.gender?"\u7537":"\u5973";return{gender:t,age:"young"===e.ageGroup?"\u5C11":"young_adult"===e.ageGroup?"\u9752":"\u8001"}},r=e=>e<3?{bg:"bg-pink-100",selectedBg:"bg-pink-500",textColor:"text-pink-700"}:{bg:"bg-blue-100",selectedBg:"bg-blue-500",textColor:"text-blue-700"};return(0,n.jsxs)("div",{className:"mb-4 p-3 bg-gradient-to-r from-slate-50 to-gray-50 rounded-lg border",children:[(0,n.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\u9ED8\u8BA4\u4EBA\u7FA4:"}),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:"\u70B9\u51FB\u8BBE\u7F6E\u5FEB\u901F\u8BA1\u6570\u9ED8\u8BA4\u9009\u9879"})]})}),(0,n.jsx)("div",{className:"grid grid-cols-6 gap-1",children:[{gender:"female",ageGroup:"young"},{gender:"female",ageGroup:"young_adult"},{gender:"female",ageGroup:"mature"},{gender:"male",ageGroup:"young"},{gender:"male",ageGroup:"young_adult"},{gender:"male",ageGroup:"mature"}].map((a,l)=>{let i=r(l),c=e.defaultDemographicIndex===l,{gender:o,age:d}=s(a);return(0,n.jsxs)("button",{onClick:()=>t(l),className:`
                px-1 py-1 rounded-lg text-sm font-bold transition-all duration-200 text-center border h-14 flex flex-col items-center justify-center
                ${c?`${i.selectedBg} text-white border-transparent shadow-md scale-105`:`${i.bg} ${i.textColor} border-gray-200 hover:border-gray-300 hover:scale-102`}
              `,children:[(0,n.jsx)("div",{className:"leading-none text-sm",children:o}),(0,n.jsx)("div",{className:"leading-none text-sm",children:d}),c&&(0,n.jsx)("div",{className:"text-xs opacity-90 mt-0.5 leading-none",children:"\u9ED8\u8BA4"})]},l)})}),(0,n.jsxs)("div",{className:"flex mt-2",children:[(0,n.jsx)("div",{className:"flex-1 text-center",children:(0,n.jsx)("div",{className:"text-xs text-pink-400 font-medium",children:"\u5973\u6027"})}),(0,n.jsx)("div",{className:"flex-1 text-center",children:(0,n.jsx)("div",{className:"text-xs text-blue-400 font-medium",children:"\u7537\u6027"})})]})]})}},3886:function(e,t,s){"use strict";s("9560"),s("9734");var n=s("5893");s("7294");t.Z=e=>{let{isOpen:t,onClose:s,selectedOption:a,onSelectionUpdate:r,demographicOptions:l,getOptionText:i,defaultDemographicIndex:c,isMobile:o}=e,d=e=>e<3?{bg:"bg-pink-400",selectedBg:"bg-pink-600"}:{bg:"bg-blue-400",selectedBg:"bg-blue-600"};return t?(0,n.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm transition-opacity duration-300",onClick:s}),(0,n.jsx)("div",{className:"relative h-full flex items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl p-4 transition-all duration-300 transform",style:{width:o?380:520,minHeight:o?180:200},children:[(0,n.jsx)("div",{className:"text-center mb-4",children:(0,n.jsx)("h2",{className:`font-bold text-gray-800 ${o?"text-lg":"text-xl"}`,children:"\u9009\u62E9\u4EBA\u7FA4"})}),(0,n.jsx)("div",{className:`flex space-x-1 ${o?"h-20":"h-24"}`,"data-demographic-selector":!0,children:l.map((e,t)=>{let s=d(t),l=a===t,u=t===c,{gender:m,age:x}=i(e);return(0,n.jsxs)("div",{className:`flex-1 ${l?s.selectedBg:s.bg} text-white rounded-lg font-bold transition-all duration-200 flex flex-col items-center justify-center text-center cursor-pointer ${l?"scale-105 shadow-lg transform":"hover:scale-102"}`,onClick:()=>r(t),children:[(0,n.jsx)("div",{className:`leading-none ${o?"text-base":"text-lg"} font-black`,children:m}),(0,n.jsx)("div",{className:`leading-none ${o?"text-base":"text-lg"} font-black mt-0.5`,children:x}),u&&(0,n.jsx)("div",{className:"text-xs opacity-75 mt-1 leading-none",children:"\u9ED8\u8BA4"})]},t)})}),(0,n.jsxs)("div",{className:"flex mt-3 px-1",children:[(0,n.jsx)("div",{className:"flex-1 text-center",children:(0,n.jsx)("div",{className:"text-xs text-pink-400 font-medium",children:"\u5973\u6027"})}),(0,n.jsx)("div",{className:"flex-1 text-center",children:(0,n.jsx)("div",{className:"text-xs text-blue-400 font-medium",children:"\u7537\u6027"})})]}),(0,n.jsx)("div",{className:"text-center mt-4",children:(0,n.jsx)("div",{className:"text-sm text-gray-600 bg-gray-50 px-4 py-2 rounded-lg",children:o?"\u70B9\u51FB\u9009\u62E9\u6216\u6ED1\u52A8\u5230\u9009\u9879":"\u79FB\u52A8\u9F20\u6807\u6216\u70B9\u51FB\u9009\u62E9\u4EBA\u7FA4"})})]})})]}):null}},9351:function(e,t,s){"use strict";var n=s("5893"),a=s("7294"),r=s("8307"),l=s("3886");t.Z=e=>{let{counterKey:t,label:s,icon:i,color:c,shortcut:o,count:d,onDecrement:u}=e,{state:m,increment:x}=(0,r.C)(),[g,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(null),y=(0,a.useRef)(null),v=(0,a.useRef)(!1),b=(0,a.useRef)(!1),j=(0,a.useRef)(0),N=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768,w=[{gender:"female",ageGroup:"young"},{gender:"female",ageGroup:"young_adult"},{gender:"female",ageGroup:"mature"},{gender:"male",ageGroup:"young"},{gender:"male",ageGroup:"young_adult"},{gender:"male",ageGroup:"mature"}],D=e=>{let t="male"===e.gender?"\u7537":"\u5973";return{gender:t,age:"young"===e.ageGroup?"\u5C11":"young_adult"===e.ageGroup?"\u9752":"\u8001"}},E=()=>w[m.defaultDemographicIndex]||w[1],T=e=>"touches"in e&&e.touches.length>0?{x:e.touches[0].clientX,y:e.touches[0].clientY}:"clientX"in e?{x:e.clientX,y:e.clientY}:{x:0,y:0},C=(0,a.useCallback)((e,t)=>{let s=Date.now();if(!(s-j.current<100)){if("touch"===t)b.current=!0;else if(b.current&&"mouse"===t)return;e.preventDefault(),j.current=s,v.current=!0,h(!0),f(m.defaultDemographicIndex)}},[m.defaultDemographicIndex]),S=(0,a.useCallback)(e=>{if(!v.current||!g)return;let t=T(e),s=document.querySelector("[data-demographic-selector]");if(s){let e=s.getBoundingClientRect(),n=t.x-e.left,a=t.y-e.top;if(n>=0&&n<=e.width&&a>=0&&a<=e.height){let t=e.width/6;f(Math.max(0,Math.min(5,Math.floor(n/t))))}}},[g]),k=(0,a.useCallback)(()=>{v.current&&g&&(x(t,w[null!==p?p:m.defaultDemographicIndex]),h(!1),f(null),v.current=!1,setTimeout(()=>{b.current=!1},500))},[g,p,x,t,m.defaultDemographicIndex]),O=(0,a.useCallback)(e=>{f(e)},[]),M=(0,a.useCallback)(()=>{h(!1),f(null),v.current=!1,setTimeout(()=>{b.current=!1},500)},[]),_=(0,a.useCallback)(e=>{C(e,"touch")},[C]),R=(0,a.useCallback)(e=>{!b.current&&C(e,"mouse")},[C]);return a.useEffect(()=>{let e=e=>S(e),t=()=>k(),s=e=>{e.preventDefault(),S(e)},n=()=>k();return v.current&&(!b.current&&(document.addEventListener("mousemove",e),document.addEventListener("mouseup",t)),document.addEventListener("touchmove",s,{passive:!1}),document.addEventListener("touchend",n)),()=>{document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",n)}},[S,k]),a.useEffect(()=>()=>{h(!1),f(null),v.current=!1,b.current=!1},[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"relative",children:(0,n.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,n.jsx)(i,{className:"w-5 h-5 text-gray-600"}),(0,n.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,n.jsx)("span",{className:"font-medium text-gray-800 block truncate",children:s}),!N&&(0,n.jsxs)("span",{className:"text-xs text-gray-500",children:["\u6309\u4F4F=\u9009\u62E9\u4EBA\u7FA4 | \u9ED8\u8BA4: ",(()=>{let{gender:e,age:t}=D(E());return`${e}${t}`})()]})]}),!N&&(0,n.jsxs)("span",{className:"text-xs bg-gray-100 px-2 py-1 rounded whitespace-nowrap",children:["\u6309\u952E: ",o]})]}),(0,n.jsx)("div",{className:"text-2xl font-bold text-gray-800 ml-2",children:d})]}),(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("button",{ref:y,onTouchStart:_,onMouseDown:R,className:`flex-1 ${c} text-white px-4 py-3 rounded-lg font-medium transition-colors duration-200 shadow-md hover:shadow-lg active:scale-95 select-none cursor-pointer touch-manipulation`,style:{userSelect:"none",WebkitUserSelect:"none",touchAction:"none"},children:"+1"}),(0,n.jsx)("button",{onClick:u,className:"px-4 py-3 bg-gray-300 hover:bg-gray-400 text-gray-700 rounded-lg font-medium transition-colors duration-200",disabled:0===d,children:"-1"})]})]})}),(0,n.jsx)(l.Z,{isOpen:g,onClose:M,selectedOption:p,onSelectionUpdate:O,demographicOptions:w,getOptionText:D,defaultDemographicIndex:m.defaultDemographicIndex,isMobile:N})]})}},1183:function(e,t,s){"use strict";var n=s("5893"),a=s("7294"),r=s("8307"),l=s("3089");t.Z=()=>{let{increment:e}=(0,r.C)(),t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<768;return((0,a.useEffect)(()=>{let t=t=>{if(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement)return;let s={gender:"female",ageGroup:"young_adult"},n={gender:"male",ageGroup:"young_adult"};switch(t.key){case"1":t.preventDefault(),e("passingBy",s);break;case"2":t.preventDefault(),e("noticing",s);break;case"3":t.preventDefault(),e("consulting",s);break;case"4":t.preventDefault(),e("buying",s);break;case"q":case"Q":t.preventDefault(),e("passingBy",n);break;case"w":case"W":t.preventDefault(),e("noticing",n);break;case"e":case"E":t.preventDefault(),e("consulting",n);break;case"r":case"R":t.preventDefault(),e("buying",n)}};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[e]),t)?null:(0,n.jsxs)("div",{className:"mt-8 bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 mb-4",children:[(0,n.jsx)(l.Z,{className:"w-5 h-5 text-gray-600"}),(0,n.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\u952E\u76D8\u5FEB\u6377\u952E"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\u5973\u6027\u9752\u5E74\u5FEB\u6377\u952E"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,n.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-blue-600 mb-1",children:"1"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u8DEF\u8FC7"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-green-600 mb-1",children:"2"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u6CE8\u610F\u5230"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-yellow-600 mb-1",children:"3"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u54A8\u8BE2"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-red-600 mb-1",children:"4"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u8D2D\u4E70"})]})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"\u7537\u6027\u9752\u5E74\u5FEB\u6377\u952E"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:[(0,n.jsxs)("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-blue-600 mb-1",children:"Q"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u8DEF\u8FC7"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-green-600 mb-1",children:"W"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u6CE8\u610F\u5230"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-yellow-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-yellow-600 mb-1",children:"E"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u54A8\u8BE2"})]}),(0,n.jsxs)("div",{className:"text-center p-3 bg-red-50 rounded-lg",children:[(0,n.jsx)("div",{className:"text-lg font-bold text-red-600 mb-1",children:"R"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"\u8D2D\u4E70"})]})]})]})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-4 text-center",children:"\u4F7F\u7528\u5FEB\u6377\u952E\u5FEB\u901F\u8BB0\u5F55\uFF0C\u6216\u6309\u4F4F\u62D6\u62FD\u6309\u94AE\u9009\u62E9\u5176\u4ED6\u4EBA\u7FA4\u7EC4\u5408"})]})}},8307:function(e,t,s){"use strict";s.d(t,{$:function(){return o},C:function(){return d}}),s("5646"),s("9774"),s("5123"),s("9560"),s("9734"),s("4510"),s("3479"),s("3366"),s("9929"),s("6301"),s("6330"),s("8221"),s("5863"),s("777");var n=s("5893"),a=s("7294");let r={counters:{total:{passingBy:0,noticing:0,consulting:0,buying:0},demographics:{passingBy:[],noticing:[],consulting:[],buying:[]}},sessionStartTime:null,lastActivityTime:null,detailedMode:!1,currentDemographic:{gender:"female",ageGroup:"young_adult"},defaultDemographicIndex:1,history:[]},l="population-flow-counter";function i(e,t){let s=Date.now();switch(t.type){case"START_SESSION":return{...e,sessionStartTime:e.sessionStartTime||s,lastActivityTime:s};case"TOGGLE_DETAILED_MODE":return{...e,detailedMode:!e.detailedMode};case"SET_CURRENT_DEMOGRAPHIC":return{...e,currentDemographic:t.demographic};case"SET_DEFAULT_DEMOGRAPHIC_INDEX":return{...e,defaultDemographicIndex:t.index};case"INCREMENT":let n={passingBy:["passingBy"],noticing:["passingBy","noticing"],consulting:["passingBy","noticing","consulting"],buying:["passingBy","noticing","consulting","buying"]}[t.counterType],a={...e.counters},l=t.demographic||e.currentDemographic,i={...a.demographics};n.forEach(e=>{a.total[e]=a.total[e]+1,i[e]=[...i[e],l]}),a.demographics=i;let c=n.map(e=>({timestamp:s,type:e,value:a.total[e],action:"increment",demographic:l}));return{...e,counters:a,sessionStartTime:e.sessionStartTime||s,lastActivityTime:s,history:[...e.history,...c]};case"DECREMENT":let o={...e.counters},d=o.total[t.counterType];if(d>0){o.total[t.counterType]=d-1;let e=o.demographics[t.counterType];e.length>0&&(o.demographics={...o.demographics,[t.counterType]:e.slice(0,-1)})}return{...e,counters:o,lastActivityTime:s,history:[...e.history,{timestamp:s,type:t.counterType,value:Math.max(0,d-1),action:"decrement"}]};case"RESET":return{...r,detailedMode:e.detailedMode,currentDemographic:e.currentDemographic,defaultDemographicIndex:e.defaultDemographicIndex,sessionStartTime:null,lastActivityTime:null};case"LOAD_FROM_STORAGE":let u;let m=t.data;return u=m.counters&&"number"==typeof m.counters.passingBy?{total:m.counters,demographics:{passingBy:[],noticing:[],consulting:[],buying:[]}}:m.counters||{total:{passingBy:0,noticing:0,consulting:0,buying:0},demographics:{passingBy:[],noticing:[],consulting:[],buying:[]}},{...m,counters:u,detailedMode:m.detailedMode||!1,currentDemographic:m.currentDemographic||{gender:"female",ageGroup:"young_adult"},defaultDemographicIndex:m.defaultDemographicIndex||1,history:m.history||[]};default:return e}}let c=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,a.useReducer)(i,r);(0,a.useEffect)(()=>{let e=localStorage.getItem(l);if(e)try{let t=JSON.parse(e);o({type:"LOAD_FROM_STORAGE",data:t})}catch(e){console.error("Error loading saved data:",e)}o({type:"START_SESSION"})},[]),(0,a.useEffect)(()=>{localStorage.setItem(l,JSON.stringify(s))},[s]);let d=(e,t)=>0===t?0:e/t*100;return(0,n.jsx)(c.Provider,{value:{state:s,increment:(e,t)=>{o({type:"INCREMENT",counterType:e,demographic:t})},decrement:e=>{o({type:"DECREMENT",counterType:e})},toggleDetailedMode:()=>{o({type:"TOGGLE_DETAILED_MODE"})},setCurrentDemographic:e=>{o({type:"SET_CURRENT_DEMOGRAPHIC",demographic:e})},setDefaultDemographicIndex:e=>{o({type:"SET_DEFAULT_DEMOGRAPHIC_INDEX",index:e})},reset:()=>{o({type:"RESET"})},exportData:()=>{let e=Date.now(),t=s.sessionStartTime?e-s.sessionStartTime:0,n=Object.keys(s.counters.total).reduce((e,t)=>{let n=s.counters.demographics[t];return e[t]={total:s.counters.total[t],byGender:{male:n.filter(e=>"male"===e.gender).length,female:n.filter(e=>"female"===e.gender).length},byAge:{young:n.filter(e=>"young"===e.ageGroup).length,young_adult:n.filter(e=>"young_adult"===e.ageGroup).length,mature:n.filter(e=>"mature"===e.ageGroup).length}},e},{}),a=new Blob([JSON.stringify({exportTimestamp:e,exportDate:new Date(e).toLocaleString("zh-CN"),sessionInfo:{startTime:s.sessionStartTime,startDate:s.sessionStartTime?new Date(s.sessionStartTime).toLocaleString("zh-CN"):null,lastActivityTime:s.lastActivityTime,lastActivityDate:s.lastActivityTime?new Date(s.lastActivityTime).toLocaleString("zh-CN"):null,sessionDuration:t,sessionDurationFormatted:`${Math.floor(t/6e4)}\u{5206}${Math.floor(t%6e4/1e3)}\u{79D2}`,detailedModeUsed:s.detailedMode},counters:s.counters.total,demographics:n,statistics:{noticeRate:d(s.counters.total.noticing,s.counters.total.passingBy),consultationRate:d(s.counters.total.consulting,s.counters.total.noticing),conversionRate:d(s.counters.total.buying,s.counters.total.consulting),overallConversion:d(s.counters.total.buying,s.counters.total.passingBy),totalInteractions:Object.values(s.counters.total).reduce((e,t)=>e+t,0)},history:s.history.map(e=>({...e,date:new Date(e.timestamp).toLocaleString("zh-CN")})),rawData:s},null,2)],{type:"application/json"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`\u{4EBA}\u{6D41}\u{91CF}\u{7EDF}\u{8BA1}_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},exportCSV:()=>{let e=new Blob(["\uFEFF"+[["\u65F6\u95F4\u6233","\u65E5\u671F\u65F6\u95F4","\u64CD\u4F5C\u7C7B\u578B","\u8BA1\u6570\u5668\u7C7B\u578B","\u8BA1\u6570\u503C","\u64CD\u4F5C","\u6027\u522B","\u5E74\u9F84\u7EC4"],...s.history.map(e=>{var t,s,n,a,r;return[e.timestamp,new Date(e.timestamp).toLocaleString("zh-CN"),e.type,"passingBy"===e.type?"\u8DEF\u8FC7":"noticing"===e.type?"\u6CE8\u610F\u5230\u5E97\u94FA":"consulting"===e.type?"\u54A8\u8BE2":"\u8D2D\u4E70",e.value,"increment"===e.action?"\u589E\u52A0":"\u51CF\u5C11",(null===(t=e.demographic)||void 0===t?void 0:t.gender)==="male"?"\u7537\u6027":(null===(s=e.demographic)||void 0===s?void 0:s.gender)==="female"?"\u5973\u6027":"\u672A\u8BB0\u5F55",(null===(n=e.demographic)||void 0===n?void 0:n.ageGroup)==="young"?"\u9752\u5C11\u5E74\u53CA\u513F\u7AE5(0-19)":(null===(a=e.demographic)||void 0===a?void 0:a.ageGroup)==="young_adult"?"\u9752\u5E74(20-35)":(null===(r=e.demographic)||void 0===r?void 0:r.ageGroup)==="mature"?"\u4E2D\u8001\u5E74(36+)":"\u672A\u8BB0\u5F55"]})].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n")],{type:"text/csv;charset=utf-8;"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=`\u{4EBA}\u{6D41}\u{91CF}\u{7EDF}\u{8BA1}_${new Date().toISOString().slice(0,19).replace(/:/g,"-")}.csv`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(t)}},children:t})},d=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useCounter must be used within a CounterProvider");return e}},3719:function(e,t,s){"use strict";var n=s("5893");s("7294");var a=s("8307"),r=s("5925"),l=s("1167"),i=s("1183");t.Z=()=>(0,n.jsx)(a.$,{children:(0,n.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:(0,n.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,n.jsxs)("header",{className:"text-center mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"\u4EBA\u6D41\u91CF\u7EDF\u8BA1\u5668"}),(0,n.jsx)("p",{className:"text-gray-600",children:"\u9AD8\u6548\u8FFD\u8E2A\u5BA2\u6237\u4E92\u52A8\u548C\u4EBA\u6D41\u91CF"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsx)(r.Z,{}),(0,n.jsx)(l.Z,{})]}),(0,n.jsx)(i.Z,{})]})})})},693:function(e,t,s){"use strict";var n=s("5893");s("7294");var a=s("745"),r=s("8871"),l=s("6930");s("9977"),a.createRoot(document.getElementById("root")).render((0,n.jsx)(r.w,{children:(0,n.jsx)(l.Z,{})}))},9977:function(e,t,s){"use strict";s.r(e.exports={})}},r={};function l(e){var t=r[e];if(void 0!==t)return t.exports;var s=r[e]={exports:{}};return a[e].call(s.exports,s,s.exports,l),s.exports}l.m=a,l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,{a:t}),t},l.d=function(e,t){for(var s in t)l.o(t,s)&&!l.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},l.k=function(e){return""+e+".css"},l.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e=[],l.O=function(t,s,n,a){if(s){a=a||0;for(var r=e.length;r>0&&e[r-1][2]>a;r--)e[r]=e[r-1];e[r]=[s,n,a];return}for(var i=1/0,r=0;r<e.length;r++){for(var s=e[r][0],n=e[r][1],a=e[r][2],c=!0,o=0;o<s.length;o++)i>=a&&Object.keys(l.O).every(function(e){return l.O[e](s[o])})?s.splice(o--,1):(c=!1,a<i&&(i=a));if(c){e.splice(r--,1);var d=n();void 0!==d&&(t=d)}}return t},l.p="/population_counter/",t={980:0},l.O.j=function(e){return 0===t[e]},s=function(e,s){var n=s[0],a=s[1],r=s[2],i,c,o=0;if(n.some(function(e){return 0!==t[e]})){for(i in a)l.o(a,i)&&(l.m[i]=a[i]);if(r)var d=r(l)}for(e&&e(s);o<n.length;o++)c=n[o],l.o(t,c)&&t[c]&&t[c][0](),t[c]=0;return l.O(d)},(n=self.webpackChunk_=self.webpackChunk_||[]).forEach(s.bind(null,0)),n.push=s.bind(null,n.push.bind(n));var i=l.O(void 0,["126","361","469"],function(){return l("693")});l.O(i)}();